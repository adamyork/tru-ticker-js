class h{static get LEFT_TO_RIGHT(){return"LeftToRight"}static get TOP_TO_BOTTOM(){return"TopToBottom"}static get RIGHT_TO_LEFT(){return"RightToLeft"}static get BOTTOM_TO_TOP(){return"BottomToTop"}static get RECT(){return"Rect"}static get ROUND_RECT(){return"RoundRect"}static get RECT_STROKE(){return"RectStroke"}static get ROUND_RECT_STROKE(){return"RoundRectStroke"}static get INFINITE(){return"Infinite"}static get ONCE(){return"Once"}static get LOOP_N(){return"LoopN"}static get builder(){return Object.create(h.Builder)}#container;#messages;#onInitialize;#autoStart;#fields;#direction;#speed;#behavior;#loop;#fontFamily;#fontSize;#fontColor;#messageDelimiter;#messageDelimiterColor;#highLightColor;#highLightDuration;#backgroundType;#backgroundColor;#backgroundPadding;#backgroundRadius;#backgroundStrokeWidth;#backgroundStrokeColor;get container(){return this.#container}get messages(){return this.#messages}get onInitialize(){return this.#onInitialize}get autoStart(){return this.#autoStart}get fields(){return this.#fields}get direction(){return this.#direction}get speed(){return this.#speed}get behavior(){return this.#behavior}get loop(){return this.#loop}get fontFamily(){return this.#fontFamily}get fontSize(){return this.#fontSize}get fontColor(){return this.#fontColor}get messageDelimiter(){return this.#messageDelimiter}get messageDelimiterColor(){return this.#messageDelimiterColor}get highLightColor(){return this.#highLightColor}get highLightDuration(){return this.#highLightDuration}get backgroundType(){return this.#backgroundType}get backgroundColor(){return this.#backgroundColor}get backgroundPadding(){return this.#backgroundPadding}get backgroundRadius(){return this.#backgroundRadius}get backgroundStrokeWidth(){return this.#backgroundStrokeWidth}get backgroundStrokeColor(){return this.#backgroundStrokeColor}constructor(t){this.#container=t._container,this.#messages=t._messages,this.#onInitialize=t._onInitialize,this.#autoStart=t._autoStart,this.#fields=t._fields,this.#direction=t._direction,this.#speed=t._speed,this.#behavior=t._behavior,this.#loop=t._loop,this.#fontFamily=t._fontFamily,this.#fontSize=t._fontSize,this.#fontColor=t._fontColor,this.#messageDelimiter=t._messageDelimiter,this.#messageDelimiterColor=t._messageDelimiterColor,this.#highLightColor=t._highLightColor,this.#highLightDuration=t._highLightDuration,this.#backgroundType=t._backgroundType,this.#backgroundColor=t._backgroundColor,this.#backgroundPadding=t._backgroundPadding,this.#backgroundRadius=t._backgroundRadius,this.#backgroundStrokeWidth=t._backgroundStrokeWidth,this.#backgroundStrokeColor=t._backgroundStrokeColor}static Builder={_container:null,_messages:{},_onInitialize:null,_autoStart:!0,_fields:15,_direction:h.LEFT_TO_RIGHT,_speed:100,_behavior:h.INFINITE,_loop:-1,_fontFamily:"Courier",_fontSize:12,_fontColor:"#000000",_messageDelimiter:"|",_messageDelimiterColor:"black",_highLightColor:"#FFFF00",_highLightDuration:2,_backgroundType:h.RECT,_backgroundColor:"#CCCCCC",_backgroundPadding:0,_backgroundRadius:10,_backgroundStrokeWidth:2,_backgroundStrokeColor:"black",container:function(t){return this._container=t,this},messages:function(t){return this._messages=t,this},autoStart:function(t){return this._autoStart=t,this},onInitialize:function(t){return this._onInitialize=t,this},fields:function(t){return this._fields=t,this},direction:function(t){return this._direction=t,this},speed:function(t){return this._speed=t,this},behavior:function(t){return this._behavior=t,this},loop:function(t){return this._loop=t,this},fontFamily:function(t){return this._fontFamily=t,this},fontSize:function(t){return this._fontSize=t,this},fontColor:function(t){return this._fontColor=t,this},messageDelimiter:function(t){return this._messageDelimiter=t,this},messageDelimiterColor:function(t){return this._messageDelimiterColor=t,this},highLightColor:function(t){return this._highLightColor=t,this},highLightDuration:function(t){return this._highLightDuration=t,this},backgroundType:function(t){return this._backgroundType=t,this},backgroundColor:function(t){return this._backgroundColor=t,this},backgroundPadding:function(t){return this._backgroundPadding=t,this},backgroundRadius:function(t){return this._backgroundRadius=t,this},backgroundStrokeWidth:function(t){return this._backgroundStrokeWidth=t,this},backgroundStrokeColor:function(t){return this._backgroundStrokeColor=t,this},build:function(){if(null===this._container)throw new Error("TruTicker config requires a container.");if(!1===this._autoStart&&null===this._onInitialize)throw new Error("If autoStart is false an intialize callback must be provided.");if(this._behavior===h.LOOP_N&&-1===this._loop)throw new Error("LOOP_N behavior requires a loop length to be provided.");return new h(this)}}}class t{#styles=[".ticker-holder-vertical {display: grid;}",".ticker-holder-horizontal {display: block; }",".tf {display: inline-block; }",".bg-rect {background: blue; }",".ticker-holder-vertical .top-rounded {border-radius: ::radiusPlaceholder::px ::radiusPlaceholder::px 0 0; }",".ticker-holder-vertical .bottom-rounded {border-radius: 0 0 ::radiusPlaceholder::px ::radiusPlaceholder::px; }",".ticker-holder-horizontal .top-rounded {border-radius: ::radiusPlaceholder::px 0 0 ::radiusPlaceholder::px; }",".ticker-holder-horizontal .bottom-rounded {border-radius: 0 ::radiusPlaceholder::px ::radiusPlaceholder::px 0; }",".ticker-holder-vertical .bg-outline-top {border-top-style: solid; border-right-style: solid; border-bottom-style: none; border-left-style: solid; }",".ticker-holder-vertical .bg-outline-middle {border-top-style: none; border-right-style: solid; border-bottom-style: none; border-left-style: solid; }",".ticker-holder-vertical .bg-outline-bottom {border-top-style: none; border-right-style: solid; border-bottom-style: solid; border-left-style: solid; }",".ticker-holder-horizontal .bg-outline-top {border-top-style: solid; border-right-style: none; border-bottom-style: solid; border-left-style: solid; }",".ticker-holder-horizontal .bg-outline-middle {border-top-style: solid; border-right-style: none; border-bottom-style: solid; border-left-style: none; }",".ticker-holder-horizontal .bg-outline-bottom {border-top-style: solid; border-right-style: solid; border-bottom-style: solid; border-left-style: none; }"];#config;#holder;#used=[];#current=[];#unused=[];#timer;#count=0;#highLightCount=0;#isDirty=!1;#countHighLight=!1;constructor(t){if(!t)throw new Error("TruTicker requires a configuration.");this.#config=t,this.#addStyling()}start(){this.#timer=setInterval(this.#update,this.#config.speed,this)}stop(){clearInterval(this.#timer)}add(t){t.forEach(t=>{this.#config.messages.push(t+"<ticker::dirty>")}),this.#isDirty=!0,this.#countHighLight=!0,this.#highLightCount=0}#getOrderDirection(){switch(this.#config.direction){case h.LEFT_TO_RIGHT:case h.TOP_TO_BOTTOM:return"normal";case h.RIGHT_TO_LEFT:case h.BOTTOM_TO_TOP:return"reverse"}}#addStyling(){this.#styles[4]=this.#styles[4].replaceAll("::radiusPlaceholder::",this.#config.backgroundRadius),this.#styles[5]=this.#styles[5].replaceAll("::radiusPlaceholder::",this.#config.backgroundRadius),this.#styles[6]=this.#styles[6].replaceAll("::radiusPlaceholder::",this.#config.backgroundRadius),this.#styles[7]=this.#styles[7].replaceAll("::radiusPlaceholder::",this.#config.backgroundRadius);var t=this.#styles.join(""),e=document.createElement("style");e.textContent=t,document.head.append(e),this.#initFields()}#initFields(){this.#holder=document.createElement("div"),this.#config.container.appendChild(this.#holder);for(var t=this.#getTextMeasuredWidthAndHeight(),e=t.width,i=t.height,r=0;r<this.#config.fields;r++){var o=document.createElement("span");o.setAttribute("id","text"+r),this.#config.direction===h.LEFT_TO_RIGHT||this.#config.direction===h.RIGHT_TO_LEFT?(this.#holder.setAttribute("class","ticker-holder-horizontal"),o.className="tf horizontal"):this.#config.direction!==h.TOP_TO_BOTTOM&&this.#config.direction!==h.BOTTOM_TO_TOP||(this.#holder.setAttribute("class","ticker-holder-vertical"),o.className="tf vertical"),this.#holder.appendChild(o),o.style["font-family"]=this.#config.fontFace,o.style.color=this.#config.fontColor,o.style["font-size"]=this.#config.fontSize,o.style.width=e+"px",o.style.height=i+"px",o.style["border-width"]=this.#config.backgroundStrokeWidth+"px",o.style["border-color"]=this.#config.backgroundStrokeColor}this.#createBackGround()}#getTextMeasuredWidthAndHeight(){var t=document.createElement("span"),e=(t.innerHTML="W",t.setAttribute("id","textMeasure"),this.#holder.appendChild(t),t.style["font-family"]=this.#config.fontFace,t.style.color=this.#config.fontColor,t.style["font-size"]=this.#config.fontSize,t.getBoundingClientRect().width),i=t.getBoundingClientRect().height;return this.#holder.removeChild(t),{width:e,height:i}}#createBackGround(){for(var t=0;t<this.#holder.children.length;t++){var e=this.#holder.children[t],i=(e.style.background=this.#config.backgroundColor,e.style.padding=this.#config.backgroundPadding+"px",e.getAttribute("class"));switch(this.#config.backgroundType){case h.RECT:e.setAttribute("class",i+" bg-rect");break;case h.ROUND_RECT:0===t?e.setAttribute("class",i+" bg-rect top-rounded"):t===this.#holder.children.length-1?e.setAttribute("class",i+" bg-rect bottom-rounded"):e.setAttribute("class",i+" bg-rect");break;case h.RECT_STROKE:0===t?e.setAttribute("class",i+" bg-outline-top"):t===this.#holder.children.length-1?e.setAttribute("class",i+" bg-outline-bottom"):e.setAttribute("class",i+" bg-outline-middle");break;case h.ROUND_RECT_STROKE:0===t?e.setAttribute("class",i+" bg-outline-top top-rounded"):t===this.#holder.children.length-1?e.setAttribute("class",i+" bg-outline-bottom bottom-rounded"):e.setAttribute("class",i+" bg-outline-middle")}}for(t=0;t<this.#holder.children.length;t++)this.#holder.children[t].innerHTML="&emsp;";this.#orderArray(this.#config.messages)}#orderArray(e){var t=this.#getOrderDirection(),r=[];e.forEach((t,e)=>{var i=!1;t.includes("<ticker::dirty>")&&(t=t.replace("<ticker::dirty>",""),i=!0,r.push({val:t,index:e})),t.split("").forEach((t,e)=>{this.#unused.unshift({val:this.#sanitizeInput(t),color:i?this.#config.highLightColor:"global",delimiter:!1})}),e!==this.#config.messages.length-1&&this.#unused.unshift({val:this.#config.messageDelimiter,color:this.#config.messageDelimiterColor,delimiter:!0})}),r.forEach(t=>{e[t.index]=t.val});for(var r=[],i=0;i<this.#config.fields;i++)"normal"===t?this.#unused.push({val:"&emsp;",color:"global",delimiter:!1}):this.#unused.unshift({val:"&emsp;",color:"global",delimiter:!1});"reverse"===t&&this.#unused.reverse(),this.#config.autoStart?this.start():this.#config.onInitialize(this)}#sanitizeInput(t){return" "===t?"&nbsp;":t}#update(t){if(0===t.#unused.length){if(t.#isDirty)return clearInterval(t.#timer),t.#unused=[],t.#current=[],t.#used=[],t.#orderArray(t.#config.messages),void(t.#isDirty=!1);for(var e=0;e<t.#config.fields;e++){var i=t.#current.pop();t.#used.unshift(i)}for(var r=t.#used.length,e=0;e<r;e++){var o=t.#used.shift();t.#unused.unshift(o)}t.#countHighLight&&(t.#highLightCount++,t.#highLightCount===t.#config.highLightDuration)&&(t.#highLightCount=0,t.#countHighLight=!1,t.#unused.forEach(t=>{t.delimiter||(t.color="global")}))}var n=t.#unused.shift();switch(t.#current.unshift(n),t.#current.length>t.#config.fields&&(n=t.#current.pop(),t.#used.unshift(n)),0===t.#unused.length&&(t.#config.behavior===h.ONCE&&(clearInterval(t.#timer),t.#count=0),t.#config.behavior===h.LOOP_N)&&(t.#count++,t.#count===t.#config.loop)&&(clearInterval(t.#timer),t.#count=0),t.#config.direction){case"LeftToRight":case"TopToBottom":for(e=0;e<t.#current.length;e++){var s=t.#holder.children[e];s.innerHTML=t.#current[e].val,t.#current[e].delimiter||"global"!==t.#current[e].color&&t.#highLightCount<t.#config.highLightDuration?s.style.color=t.#current[e].color:s.style.color=t.#config.fontColor}break;case"RightToLeft":case"BottomToTop":for(e=0;e<t.#current.length;e++){var l=t.#holder.children[t.#config.fields-1-e];l.innerHTML=t.#current[e].val,t.#current[e].delimiter||"global"!==t.#current[e].color&&t.#highLightCount<t.#config.highLightDuration?l.style.color=t.#current[e].color:l.style.color=t.#config.fontColor}}}}export{h as TruTickerConfig,t as TruTicker};